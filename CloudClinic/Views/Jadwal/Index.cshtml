@model IEnumerable<CloudClinic.Models.Jadwal>

@{
    ViewBag.Title = "Jadwal Cloudental";
}

<h2>Jadwal Cloudental</h2>
@if (User.IsInRole("Dokter,Admin"))
{
<p>
    @Html.ActionLink("Tambah Jadwal", "Create")
</p>
}
<p>
    @Html.ActionLink("New", "Create", new { Controller = "Jadwal" }, new { @class = "btn btn-primary" })
</p>


    @{
        foreach (var item in Model.Select(a => a.TanggalJadwal).Distinct())
        {
            <h3>Jadwal : @item</h3>
            <div>
                <table class="table">
                    <tr>
                        <th>
                            Dokter
                        </th>
                        <th>
                            Sesi
                        </th>
                        <th>
                            Ruang
                        </th>
                        <th>
                            Appointment ID
                        </th>
                        <th></th>
                    </tr>
                    @foreach (var i in Model.Where(a => a.TanggalJadwal.Equals(@item)))
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => i.Pengguna.Nama)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => i.Sesi)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => i.Ruang)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => i.AppointmentId)
                            </td>
                            <td>
                                @Html.ActionLink("Edit", "Edit", new { Controller = "Jadwal", id = i.PenggunaId }, new { @class = "btn btn-default btn-xs" })
                                @Html.ActionLink("Delete", "Jadwal",
                                new { id = i.PenggunaId },
                                new { @class = "btn btn-danger btn-xs", onclick = "return confirm('Are you sure?');" })
                            </td>
                        </tr>
                    }
                </table>
            </div>
        }
    }
